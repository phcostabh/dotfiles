#!/bin/bash

# apt-fast
alias apt-get="apt-fast"

# Packages management
alias clean="sudo apt-fast autoremove; sudo apt-fast autoclean; sudo apt-fast purge; sudo apt-fast clean"
alias update="sudo apt-fast update --quiet; sudo apt-fast upgrade --yes"
alias unlockdpkg="sudo fuser -vik /var/lib/dpkg/lock; sudo dpkg --configure -a"
alias cleanpackages="sudo dpkg --get-selections | grep deinstall | sed 's/\t\+.*//g' | xargs sudo dpkg --purge"

# Vim (Gvim)
alias gvim="gvim --remote-silent"
alias eg="gvim .git/config"

# Tmux
alias tmux="TERM=screen-256color-bce tmux"

# Ruby
alias uninstallgems="gem list | cut -d' ' -f1 | xargs gem uninstall -aIx"

# Helper Functions
function untar () {
    7z e $1
}

function authme {
    # ssh $1 '[ ! -e ~/.ssh/ ] && mkdir ~/.ssh 2>/dev/null; cat >>.ssh/authorized_keys' < ~/.ssh/id_rsa.pub
    [[ ! -z "$1" ]] && /usr/bin/ssh-copy-id -i ~/.ssh/id_rsa.pub "$1"
}

function take () {
    mkdir $1
    cd $1
}

function generate-hash {
    echo -n "$1$(date +%d%m%Y%H%M%S%N)" | openssl sha1 | awk '{ print $2 }'
}

function list-ppa {
    for APT in `find /etc/apt/ -name \*.list`; do
        grep -o "^deb http://ppa.launchpad.net/[a-z0-9\-]\+/[a-z0-9\-]\+" $APT | while read ENTRY ; do
            USER=`echo $ENTRY | cut -d/ -f4`
            PPA=`echo $ENTRY | cut -d/ -f5`
            echo sudo apt-add-repository ppa:$USER/$PPA
        done
    done
}

function search {
    find -name "*.$2" -type f -exec egrep -n -H --color "$1" {} \;
}

alias ports='netstat -tulanp'
alias mount='mount |column -t'
alias path='echo -e ${PATH//:/\\n}'

# Get OS X Software Updates and Homebrew
alias update='sudo softwareupdate -i -a; brew update; brew upgrade; brew cleanup'
